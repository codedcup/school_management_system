// studentData.js
export const studentData = [
  {
    name: "John Doe",
    grade: "A",
    batch: "Morning",
    subjects: ["Math", "Science", "English"],
    attendance: {
      "2025-02-01": { studyHours: 20, questionsSolved: 25 },
      "2025-02-03": { studyHours: 15, questionsSolved: 20 },
      "2025-02-05": { studyHours: 10, questionsSolved: 15 },
      "2025-02-07": { studyHours: 18, questionsSolved: 22 },
      "2025-02-09": { studyHours: 16, questionsSolved: 18 },
      "2025-02-10": { studyHours: 15, questionsSolved: 20 },
      "2025-02-12": { studyHours: 14, questionsSolved: 19 },
      "2025-02-15": { studyHours: 20, questionsSolved: 25 },
      "2025-02-18": { studyHours: 17, questionsSolved: 23 },
      "2025-02-20": { studyHours: 19, questionsSolved: 24 },
      "2025-02-22": { studyHours: 15, questionsSolved: 21 },
    },
    practicedTopics: {
      "2025-02-01": ["Algebra", "Physics"],
      "2025-02-03": ["Trigonometry", "Chemistry"],
      "2025-02-05": ["Geometry"],
      "2025-02-07": ["Calculus", "Biology"],
      "2025-02-09": ["Statistics", "Earth Science"],
      "2025-02-10": ["Differential Equations"],
      "2025-02-12": ["Organic Chemistry", "Literature"],
      "2025-02-15": ["Probability", "Grammar"],
      "2025-02-18": ["Linear Algebra", "Astronomy"],
      "2025-02-20": ["Mechanics", "Writing"],
      "2025-02-22": ["Number Theory", "Ecology"],
    },
  },
  {
    name: "Alice Johnson",
    grade: "B",
    batch: "Evening",
    subjects: ["Math", "History", "English"],
    attendance: {
      "2025-02-02": { studyHours: 12, questionsSolved: 18 },
      "2025-02-04": { studyHours: 15, questionsSolved: 20 },
      "2025-02-06": { studyHours: 14, questionsSolved: 20 },
      "2025-02-08": { studyHours: 13, questionsSolved: 17 },
      "2025-02-10": { studyHours: 16, questionsSolved: 22 },
      "2025-02-11": { studyHours: 10, questionsSolved: 12 },
      "2025-02-13": { studyHours: 18, questionsSolved: 25 },
      "2025-02-16": { studyHours: 14, questionsSolved: 19 },
      "2025-02-19": { studyHours: 17, questionsSolved: 23 },
      "2025-02-21": { studyHours: 15, questionsSolved: 21 },
      "2025-02-23": { studyHours: 12, questionsSolved: 18 },
    },
    practicedTopics: {
      "2025-02-02": ["Algebra", "World War II"],
      "2025-02-04": ["Geometry", "Ancient Rome"],
      "2025-02-06": ["Trigonometry"],
      "2025-02-08": ["Medieval History", "Grammar"],
      "2025-02-10": ["Calculus", "Renaissance"],
      "2025-02-11": ["Literature"],
      "2025-02-13": ["Modern History", "Poetry"],
      "2025-02-16": ["Statistics", "Cold War"],
      "2025-02-19": ["Writing", "Industrial Revolution"],
      "2025-02-21": ["Probability", "Vocabulary"],
      "2025-02-23": ["Number Theory", "American History"],
    },
  },
  {
    name: "Michael Smith",
    grade: "A",
    batch: "Morning",
    subjects: ["Science", "Math", "Computer Science"],
    attendance: {
      "2025-02-03": { studyHours: 16, questionsSolved: 30 },
      "2025-02-05": { studyHours: 18, questionsSolved: 28 },
      "2025-02-07": { studyHours: 12, questionsSolved: 18 },
      "2025-02-09": { studyHours: 20, questionsSolved: 25 },
      "2025-02-11": { studyHours: 15, questionsSolved: 22 },
      "2025-02-12": { studyHours: 20, questionsSolved: 25 },
      "2025-02-14": { studyHours: 17, questionsSolved: 24 },
      "2025-02-16": { studyHours: 19, questionsSolved: 27 },
      "2025-02-18": { studyHours: 14, questionsSolved: 20 },
      "2025-02-20": { studyHours: 16, questionsSolved: 23 },
      "2025-02-22": { studyHours: 18, questionsSolved: 26 },
    },
    practicedTopics: {
      "2025-02-03": ["Physics", "Algebra"],
      "2025-02-05": ["Chemistry", "Programming"],
      "2025-02-07": ["Calculus"],
      "2025-02-09": ["Biology", "Data Structures"],
      "2025-02-11": ["Astronomy", "Statistics"],
      "2025-02-12": ["Computer Networks"],
      "2025-02-14": ["Ecology", "Algorithms"],
      "2025-02-16": ["Geology", "Linear Algebra"],
      "2025-02-18": ["Thermodynamics", "Databases"],
      "2025-02-20": ["Quantum Physics", "Probability"],
      "2025-02-22": ["Software Design", "Trigonometry"],
    },
  },
  {
    name: "Emily Davis",
    grade: "C",
    batch: "Afternoon",
    subjects: ["English", "Biology", "Geography"],
    attendance: {
      "2025-02-04": { studyHours: 18, questionsSolved: 10 },
      "2025-02-06": { studyHours: 15, questionsSolved: 22 },
      "2025-02-08": { studyHours: 12, questionsSolved: 18 },
      "2025-02-10": { studyHours: 14, questionsSolved: 20 },
      "2025-02-12": { studyHours: 10, questionsSolved: 15 },
      "2025-02-13": { studyHours: 5, questionsSolved: 15 },
      "2025-02-15": { studyHours: 16, questionsSolved: 19 },
      "2025-02-17": { studyHours: 13, questionsSolved: 17 },
      "2025-02-19": { studyHours: 11, questionsSolved: 14 },
      "2025-02-21": { studyHours: 17, questionsSolved: 23 },
      "2025-02-23": { studyHours: 15, questionsSolved: 21 },
    },
    practicedTopics: {
      "2025-02-04": ["Essay Writing", "Human Anatomy"],
      "2025-02-06": ["Environmental Science", "Climate"],
      "2025-02-08": ["Grammar", "Ecology"],
      "2025-02-10": ["Literature", "Physical Geography"],
      "2025-02-12": ["Poetry", "Genetics"],
      "2025-02-13": ["Map Reading"],
      "2025-02-15": ["Creative Writing", "Biomes"],
      "2025-02-17": ["Cell Biology", "Oceanography"],
      "2025-02-19": ["Vocabulary", "Geology"],
      "2025-02-21": ["Botany", "Weather Patterns"],
      "2025-02-23": ["Short Stories", "Evolution"],
    },
  },
  {
    name: "Daniel Martinez",
    grade: "A",
    batch: "Morning",
    subjects: ["Physics", "Math", "Chemistry"],
    attendance: {
      "2025-02-01": { studyHours: 18, questionsSolved: 28 },
      "2025-02-03": { studyHours: 20, questionsSolved: 30 },
      "2025-02-05": { studyHours: 22, questionsSolved: 35 },
      "2025-02-07": { studyHours: 19, questionsSolved: 27 },
      "2025-02-09": { studyHours: 17, questionsSolved: 25 },
      "2025-02-11": { studyHours: 21, questionsSolved: 32 },
      "2025-02-13": { studyHours: 18, questionsSolved: 29 },
      "2025-02-15": { studyHours: 20, questionsSolved: 31 },
      "2025-02-17": { studyHours: 16, questionsSolved: 24 },
      "2025-02-19": { studyHours: 23, questionsSolved: 33 },
      "2025-02-21": { studyHours: 19, questionsSolved: 28 },
    },
    practicedTopics: {
      "2025-02-01": ["Algebra", "Physics"],
      "2025-02-03": ["Trigonometry", "Chemistry"],
      "2025-02-05": ["Geometry", "Algebra"], // Algebra repeats
      "2025-02-07": ["Calculus", "Biology"],
      "2025-02-09": ["Statistics", "Physics"], // Physics repeats
      "2025-02-10": ["Differential Equations", "Calculus"], // Calculus repeats
      "2025-02-12": ["Organic Chemistry", "Literature"],
      "2025-02-15": ["Probability", "Algebra"], // Algebra repeats
      "2025-02-18": ["Linear Algebra", "Astronomy"],
      "2025-02-20": ["Mechanics", "Physics"], // Physics repeats
      "2025-02-22": ["Number Theory", "Ecology"],
    },
  },
  {
    name: "Sarah Williams",
    grade: "B",
    batch: "Afternoon",
    subjects: ["Chemistry", "Biology", "English"],
    attendance: {
      "2025-02-02": { studyHours: 15, questionsSolved: 20 },
      "2025-02-04": { studyHours: 18, questionsSolved: 25 },
      "2025-02-06": { studyHours: 14, questionsSolved: 19 },
      "2025-02-08": { studyHours: 16, questionsSolved: 22 },
      "2025-02-10": { studyHours: 12, questionsSolved: 15 },
      "2025-02-12": { studyHours: 17, questionsSolved: 23 },
      "2025-02-14": { studyHours: 13, questionsSolved: 18 },
      "2025-02-16": { studyHours: 19, questionsSolved: 26 },
      "2025-02-18": { studyHours: 15, questionsSolved: 21 },
      "2025-02-20": { studyHours: 14, questionsSolved: 20 },
      "2025-02-22": { studyHours: 16, questionsSolved: 24 },
    },
    practicedTopics: {
      "2025-02-02": ["Chemical Bonds", "Cell Biology"],
      "2025-02-04": ["Biochemistry", "Grammar"],
      "2025-02-06": ["Organic Chemistry", "Genetics"],
      "2025-02-08": ["Evolution", "Literature"],
      "2025-02-10": ["Inorganic Chemistry", "Writing"],
      "2025-02-12": ["Ecology", "Poetry"],
      "2025-02-14": ["Chemical Reactions", "Vocabulary"],
      "2025-02-16": ["Microbiology", "Essay Writing"],
      "2025-02-18": ["Analytical Chemistry", "Botany"],
      "2025-02-20": ["Zoology", "Short Stories"],
      "2025-02-22": ["Biophysics", "Creative Writing"],
    },
  },
  {
    name: "Robert Chen",
    grade: "A",
    batch: "Evening",
    subjects: ["Math", "Physics", "Computer Science"],
    attendance: {
      "2025-02-03": { studyHours: 20, questionsSolved: 32 },
      "2025-02-05": { studyHours: 15, questionsSolved: 28 },
      "2025-02-07": { studyHours: 18, questionsSolved: 30 },
      "2025-02-09": { studyHours: 22, questionsSolved: 35 },
      "2025-02-11": { studyHours: 17, questionsSolved: 27 },
      "2025-02-13": { studyHours: 19, questionsSolved: 29 },
      "2025-02-15": { studyHours: 21, questionsSolved: 33 },
      "2025-02-17": { studyHours: 16, questionsSolved: 25 },
      "2025-02-19": { studyHours: 20, questionsSolved: 31 },
      "2025-02-21": { studyHours: 18, questionsSolved: 28 },
      "2025-02-23": { studyHours: 19, questionsSolved: 30 },
    },
    practicedTopics: {
      "2025-02-03": ["Statistics", "Mechanics"],
      "2025-02-05": ["Programming", "Electromagnetism"],
      "2025-02-07": ["Calculus", "Thermodynamics"],
      "2025-02-09": ["Data Structures", "Optics"],
      "2025-02-11": ["Algorithms", "Quantum Physics"],
      "2025-02-13": ["Probability", "Fluid Dynamics"],
      "2025-02-15": ["Linear Algebra", "Relativity"],
      "2025-02-17": ["Databases", "Acoustics"],
      "2025-02-19": ["Number Theory", "Software Design"],
      "2025-02-21": ["Trigonometry", "Networking"],
      "2025-02-23": ["Geometry", "Cybersecurity"],
    },
  },
  {
    name: "Lisa Brown",
    grade: "C",
    batch: "Morning",
    subjects: ["History", "Geography", "English"],
    attendance: {
      "2025-02-04": { studyHours: 10, questionsSolved: 15 },
      "2025-02-06": { studyHours: 12, questionsSolved: 18 },
      "2025-02-08": { studyHours: 14, questionsSolved: 20 },
      "2025-02-10": { studyHours: 11, questionsSolved: 16 },
      "2025-02-12": { studyHours: 13, questionsSolved: 19 },
      "2025-02-14": { studyHours: 9, questionsSolved: 14 },
      "2025-02-16": { studyHours: 15, questionsSolved: 21 },
      "2025-02-18": { studyHours: 12, questionsSolved: 17 },
      "2025-02-20": { studyHours: 10, questionsSolved: 15 },
      "2025-02-22": { studyHours: 13, questionsSolved: 18 },
      "2025-02-23": { studyHours: 11, questionsSolved: 16 },
    },
    practicedTopics: {
      "2025-02-04": ["Ancient Civilizations", "Climate"],
      "2025-02-06": ["Renaissance", "Physical Geography"],
      "2025-02-08": ["Medieval History", "Grammar"],
      "2025-02-10": ["World War I", "Map Reading"],
      "2025-02-12": ["Industrial Revolution", "Literature"],
      "2025-02-14": ["Cold War", "Oceanography"],
      "2025-02-16": ["American History", "Poetry"],
      "2025-02-18": ["Modern History", "Geology"],
      "2025-02-20": ["Ancient Greece", "Writing"],
      "2025-02-22": ["World War II", "Weather Patterns"],
      "2025-02-23": ["Colonial Era", "Vocabulary"],
    },
  },
  {
    name: "Thomas Lee",
    grade: "B",
    batch: "Evening",
    subjects: ["Science", "Math", "Economics"],
    attendance: {
      "2025-02-01": { studyHours: 14, questionsSolved: 22 },
      "2025-02-03": { studyHours: 16, questionsSolved: 25 },
      "2025-02-05": { studyHours: 13, questionsSolved: 20 },
      "2025-02-07": { studyHours: 15, questionsSolved: 23 },
      "2025-02-09": { studyHours: 17, questionsSolved: 26 },
      "2025-02-11": { studyHours: 12, questionsSolved: 18 },
      "2025-02-13": { studyHours: 18, questionsSolved: 27 },
      "2025-02-15": { studyHours: 14, questionsSolved: 21 },
      "2025-02-17": { studyHours: 16, questionsSolved: 24 },
      "2025-02-19": { studyHours: 13, questionsSolved: 19 },
      "2025-02-21": { studyHours: 15, questionsSolved: 22 },
    },
    practicedTopics: {
      "2025-02-01": ["Astronomy", "Statistics"],
      "2025-02-03": ["Microeconomics", "Calculus"],
      "2025-02-05": ["Physics", "Probability"],
      "2025-02-07": ["Macroeconomics", "Trigonometry"],
      "2025-02-09": ["Chemistry", "Linear Algebra"],
      "2025-02-11": ["Supply and Demand", "Geometry"],
      "2025-02-13": ["Biology", "Game Theory"],
      "2025-02-15": ["Ecology", "Number Theory"],
      "2025-02-17": ["Monetary Policy", "Algebra"],
      "2025-02-19": ["Earth Science", "Econometrics"],
      "2025-02-21": ["Fiscal Policy", "Vectors"],
    },
  },
  {
    name: "Olivia Taylor",
    grade: "A",
    batch: "Afternoon",
    subjects: ["Biology", "Chemistry", "Psychology"],
    attendance: {
      "2025-02-02": { studyHours: 17, questionsSolved: 28 },
      "2025-02-04": { studyHours: 19, questionsSolved: 30 },
      "2025-02-06": { studyHours: 15, questionsSolved: 25 },
      "2025-02-08": { studyHours: 18, questionsSolved: 27 },
      "2025-02-10": { studyHours: 16, questionsSolved: 24 },
      "2025-02-12": { studyHours: 20, questionsSolved: 31 },
      "2025-02-14": { studyHours: 14, questionsSolved: 22 },
      "2025-02-16": { studyHours: 21, questionsSolved: 32 },
      "2025-02-18": { studyHours: 17, questionsSolved: 26 },
      "2025-02-20": { studyHours: 19, questionsSolved: 29 },
      "2025-02-22": { studyHours: 15, questionsSolved: 23 },
    },
    practicedTopics: {
      "2025-02-02": ["Ecology", "Inorganic Chemistry"],
      "2025-02-04": ["Cognitive Psychology", "Organic Chemistry"],
      "2025-02-06": ["Genetics", "Chemical Reactions"],
      "2025-02-08": ["Neuroscience", "Biochemistry"],
      "2025-02-10": ["Evolution", "Analytical Chemistry"],
      "2025-02-12": ["Behavioral Psychology", "Thermodynamics"],
      "2025-02-14": ["Cell Biology", "Kinetics"],
      "2025-02-16": ["Social Psychology", "Electrochemistry"],
      "2025-02-18": ["Botany", "Chemical Bonding"],
      "2025-02-20": ["Developmental Psychology", "Solutions"],
      "2025-02-22": ["Microbiology", "Spectroscopy"],
    },
  },
];

// Enhanced getStudentData function (unchanged)
export const getStudentData = (filters, includeMostPracticedTopics = false) => {
  const filteredStudents = studentData.filter((student) => {
    return (
      (!filters.student ||
        student.name.toLowerCase().includes(filters.student.toLowerCase())) &&
      (!filters.grade || student.grade === filters.grade) &&
      (!filters.batch || student.batch === filters.batch) &&
      (!filters.subject || student.subjects.includes(filters.subject)) &&
      (!filters.date || student.attendance[filters.date])
    );
  });

  if (includeMostPracticedTopics) {
    return filteredStudents.map((student) => {
      const topicCount = {};
      Object.values(student.practicedTopics || {})
        .flat()
        .forEach((topic) => {
          topicCount[topic] = (topicCount[topic] || 0) + 1;
        });

      const mostPracticedTopics = Object.entries(topicCount)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 3) // Top 3 topics
        .map(([topic, count]) => ({ topic, count }));

      return {
        ...student,
        mostPracticedTopics,
      };
    });
  }

  return filteredStudents;
};
